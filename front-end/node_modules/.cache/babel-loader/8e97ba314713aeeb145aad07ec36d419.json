{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/user/Desktop/projects/Emotion_Diary/front-end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/user/Desktop/projects/Emotion_Diary/front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/user/Desktop/projects/Emotion_Diary/front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import EditButtons from\"../components/EditButtons\";import EditTable from\"../components/EditTable\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditPageContainer=function EditPageContainer(){var initialDatas=[{eventName:\"Apple\",typeId:1,yearMonthDay:\"20200530\",startTime:\"\",endTime:\"\",locationId:0,cost:50,mood:\"Happy\",country:\"Taiwan\",city:\"Taipei\",street:\"BackStreet\",building:\"\"},{eventName:\"Banana\",typeId:2,yearMonthDay:\"20210601\",startTime:\"\",endTime:\"\",locationId:1,cost:50,mood:\"Happy\",country:\"Taiwan\",city:\"Taipei\",street:\"BackStreet\",building:\"\"},{eventName:\"Candy\",typeId:3,yearMonthDay:\"20220405\",startTime:\"\",endTime:\"\",locationId:2,cost:50,mood:\"Happy\",country:\"Taiwan\",city:\"Taipei\",street:\"BackStreet\",building:\"\"},{eventName:\"Dance\",typeId:4,yearMonthDay:\"20220220\",startTime:\"\",endTime:\"\",locationId:3,cost:50,mood:\"Happy\",country:\"Taiwan\",city:\"Taipei\",street:\"BackStreet\",building:\"\"}];var initialLocations=[{locationId:0,country:\"Taiwan\",city:\"Taipei\",street:\"BackStreet\",building:\"\"},{locationId:1,country:\"Taiwan\",city:\"Taipei\",street:\"BackStreet\",building:\"\"},{locationId:2,country:\"Taiwan\",city:\"Taipei\",street:\"BackStreet\",building:\"\"},{locationId:3,country:\"Taiwan\",city:\"Taipei\",street:\"BackStreet\",building:\"\"}];var initialTypes=[{typeId:0,typeName:\"emergency\"},{typeId:1,typeName:\"school\"},{typeId:2,typeName:\"work\"},{typeId:3,typeName:\"food\"}];var _useState=useState(\"normal\"),_useState2=_slicedToArray(_useState,2),viewMode=_useState2[0],setViewMode=_useState2[1];var _useState3=useState(initialDatas),_useState4=_slicedToArray(_useState3,2),datas=_useState4[0],setDatas=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),chosenData=_useState6[0],setChosenData=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),locations=_useState8[0],setLocations=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),types=_useState10[0],setTypes=_useState10[1];var _useState11=useState(-1),_useState12=_slicedToArray(_useState11,2),locationMax=_useState12[0],setLocationMax=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),keywordDatas=_useState14[0],setKeywordDatas=_useState14[1];var fetchDatas=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"http://localhost:5000/view\");case 3:data=_context.sent;_context.next=6;return data.json();case 6:json=_context.sent;json.forEach(function(data){for(var oldKey in data){var temp=void 0;temp=oldKey.split(\"_\");var newKey=temp[0].toLocaleLowerCase();temp.forEach(function(word,index){if(index>0){word=word[0].toUpperCase()+word.slice(1);newKey+=word;}});data[newKey]=data[oldKey];}});setDatas(json);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(\"err in fetching datas\",_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function fetchDatas(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchDatas();},[]);useEffect(function(){var max=-1;locations.forEach(function(location){return max=location.locationId>max?location.locationId:max;});if(max>=0){setLocationMax(max);}},[locations]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(EditButtons,{datas:datas,chosenData:chosenData,types:types,setViewMode:setViewMode,setKeywordDatas:setKeywordDatas}),/*#__PURE__*/_jsx(EditTable,{datas:datas,setDatas:setDatas,chosenData:chosenData,setChosenData:setChosenData,locations:locations,setLocations:setLocations,types:types,setTypes:setTypes,locationMax:locationMax,setLocationMax:setLocationMax,viewMode:viewMode,keywordDatas:keywordDatas})]});};export default EditPageContainer;","map":{"version":3,"names":["useState","useEffect","EditButtons","EditTable","EditPageContainer","initialDatas","eventName","typeId","yearMonthDay","startTime","endTime","locationId","cost","mood","country","city","street","building","initialLocations","initialTypes","typeName","viewMode","setViewMode","datas","setDatas","chosenData","setChosenData","locations","setLocations","types","setTypes","locationMax","setLocationMax","keywordDatas","setKeywordDatas","fetchDatas","fetch","data","json","forEach","oldKey","temp","split","newKey","toLocaleLowerCase","word","index","toUpperCase","slice","console","log","max","location"],"sources":["C:/Users/user/Desktop/projects/Emotion_Diary/front-end/src/containers/EditPageContainer.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport EditButtons from \"../components/EditButtons\";\r\nimport EditTable from \"../components/EditTable\";\r\n\r\nconst EditPageContainer = () => {\r\n    const initialDatas = [\r\n        {\r\n            eventName: \"Apple\",\r\n            typeId: 1,\r\n            yearMonthDay: \"20200530\",\r\n            startTime: \"\",\r\n            endTime: \"\",\r\n            locationId: 0,\r\n            cost: 50,\r\n            mood: \"Happy\",\r\n            country: \"Taiwan\",\r\n            city: \"Taipei\",\r\n            street: \"BackStreet\",\r\n            building: \"\"\r\n        },\r\n        {\r\n            eventName: \"Banana\",\r\n            typeId: 2,\r\n            yearMonthDay: \"20210601\",\r\n            startTime: \"\",\r\n            endTime: \"\",\r\n            locationId: 1,\r\n            cost: 50,\r\n            mood: \"Happy\",\r\n            country: \"Taiwan\",\r\n            city: \"Taipei\",\r\n            street: \"BackStreet\",\r\n            building: \"\"\r\n        },\r\n        {\r\n            eventName: \"Candy\",\r\n            typeId: 3,\r\n            yearMonthDay: \"20220405\",\r\n            startTime: \"\",\r\n            endTime: \"\",\r\n            locationId: 2,\r\n            cost: 50,\r\n            mood: \"Happy\",\r\n            country: \"Taiwan\",\r\n            city: \"Taipei\",\r\n            street: \"BackStreet\",\r\n            building: \"\"\r\n        },\r\n        {\r\n            eventName: \"Dance\",\r\n            typeId: 4,\r\n            yearMonthDay: \"20220220\",\r\n            startTime: \"\",\r\n            endTime: \"\",\r\n            locationId: 3,\r\n            cost: 50,\r\n            mood: \"Happy\",\r\n            country: \"Taiwan\",\r\n            city: \"Taipei\",\r\n            street: \"BackStreet\",\r\n            building: \"\"\r\n        }\r\n    ];\r\n    const initialLocations = [\r\n        {\r\n            locationId: 0,\r\n            country: \"Taiwan\",\r\n            city: \"Taipei\",\r\n            street: \"BackStreet\",\r\n            building: \"\"\r\n        },\r\n        {\r\n            locationId: 1,\r\n            country: \"Taiwan\",\r\n            city: \"Taipei\",\r\n            street: \"BackStreet\",\r\n            building: \"\"\r\n        },\r\n        {\r\n            locationId: 2,\r\n            country: \"Taiwan\",\r\n            city: \"Taipei\",\r\n            street: \"BackStreet\",\r\n            building: \"\"\r\n        },\r\n        {\r\n            locationId: 3,\r\n            country: \"Taiwan\",\r\n            city: \"Taipei\",\r\n            street: \"BackStreet\",\r\n            building: \"\"\r\n        }\r\n    ]\r\n    const initialTypes = [{\r\n        typeId: 0,\r\n        typeName: \"emergency\"\r\n    },\r\n    {\r\n        typeId: 1,\r\n        typeName: \"school\"\r\n    },\r\n    {\r\n        typeId: 2,\r\n        typeName: \"work\"\r\n    },\r\n    {\r\n        typeId: 3,\r\n        typeName: \"food\"\r\n    }]\r\n    const [viewMode, setViewMode] = useState(\"normal\");\r\n    const [datas, setDatas] = useState(initialDatas);\r\n    const [chosenData, setChosenData] = useState({});\r\n    const [locations, setLocations] = useState([]);\r\n    const [types, setTypes] = useState([]);\r\n    const [locationMax, setLocationMax] = useState(-1);\r\n    const [keywordDatas, setKeywordDatas] = useState([]);\r\n\r\n    const fetchDatas = async () => {\r\n        try {\r\n            const data = await fetch(\"http://localhost:5000/view\");\r\n            const json = await data.json();\r\n            json.forEach(data => {\r\n                for (let oldKey in data) {\r\n                    let temp;\r\n                    temp = oldKey.split(\"_\");\r\n                    let newKey = temp[0].toLocaleLowerCase();\r\n                    temp.forEach((word, index) => {\r\n                        if (index > 0) {\r\n                            word = word[0].toUpperCase() + word.slice(1);\r\n                            newKey += word;\r\n                        }\r\n                    });\r\n                    data[newKey] = data[oldKey];\r\n                }\r\n            })\r\n            setDatas(json);\r\n        }\r\n        catch (err) {\r\n            console.log(\"err in fetching datas\", err);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchDatas();\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        let max = -1;\r\n        locations.forEach((location) => max = location.locationId > max ? location.locationId : max);\r\n        if (max >= 0) {\r\n            setLocationMax(max);\r\n        }\r\n    }, [locations])\r\n\r\n    return (\r\n        <div>\r\n            <EditButtons datas={datas} chosenData={chosenData} types={types} setViewMode={setViewMode} setKeywordDatas={setKeywordDatas} />\r\n            <EditTable datas={datas} setDatas={setDatas} chosenData={chosenData} setChosenData={setChosenData} locations={locations} setLocations={setLocations} types={types} setTypes={setTypes} locationMax={locationMax} setLocationMax={setLocationMax} viewMode={viewMode} keywordDatas={keywordDatas} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EditPageContainer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}